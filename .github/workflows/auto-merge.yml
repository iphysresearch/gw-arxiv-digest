name: Auto Merge PR

on:
  schedule:
    - cron: '0 * * * *'  # 每小时运行一次

jobs:
  auto-merge:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Install GitHub CLI
        run: sudo apt-get update &amp;&amp; sudo apt-get install -y gh
      - name: Check and merge old PRs
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          gh auth login --with-token &lt;&lt;&lt; $GITHUB_TOKEN
          gh pr list --state open --json number,createdAt | jq '.[] | select((now - ( .createdAt | fromdateiso8601 )) &gt; 86400)' | jq '.number' | xargs -I {} gh pr merge {} --auto --merge
